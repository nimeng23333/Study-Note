---
title: 1.创建项目、安装依赖
---
```shell
npm init vite@latest
```

```shell
npm i
```

## vite
```shell
npm i vite
```

```shell
npm i vite-plugin-imp
```
自动导入组件库样式的vite插件

## antd、antd icon

```shell
npm i antd
```

```shell
npm i @ant-design/icons@5.0.1
```

antd与其他样式库兼容（tailwindcss）

## react 相关
dom
```shell
npm i react-dom
```

路由
```shell
npm i react-router-dom
```

react表单
```shell
npm i react-hook-form
```

## redux相关
```shell
npm i redux
```

```shell
npm i react-redux
```

```shell
npm i @reduxjs/toolkit
```
Redux 官方推荐的工具包，简化 Redux 的使用

## 国际化解决方案
```shell
npm i i18next-browser-languagedetector
```

```shell
npm i react-i18next
```

## 前端存储

```shell
npm install localforage
```

[localForage 中文文档](https://localforage.docschina.org/)

localForage 是一个 JavaScript 库，通过简单类似 `localStorage` API 的异步存储来改进你的 Web 应用程序的离线体验。它能存储多种类型的数据，而不仅仅是字符串。

localForage 有一个优雅降级策略，若浏览器不支持 IndexedDB 或 WebSQL，则使用 localStorage。在所有主流浏览器中都可用：Chrome，Firefox，IE 和 Safari（包括 Safari Mobile）。

然后，只需包含 JS 文件即可使用 localForage：`<script src="localforage.js"></script>`。你不需要运行任何初始化方法或等待 `onready` 事件。

## 搜索及排序

```shell
npm i match-sorter
```
模糊匹配和排序工具，常用于搜索建议或过滤列表

```shell
npm i sort-by
```
轻量级的排序工具，可以按字段对对象数组进行排序

## 打印及下载

打印
```Shell
npm i react-to-print
```
## css

```shell
npm install --save-dev sass
```
CSS 预处理器，全称是 **Syntactically Awesome Stylesheets**。它的主要作用是让 CSS 更加灵活、可维护、可复用。

### 为什么 Sass 属于 `devDependencies`

- **Sass 是一个编译工具**：它的作用是把 `.scss` 或 `.sass` 文件编译成标准的 `.css` 文件。这个过程只发生在开发或构建阶段。
    
- **生产环境不需要 Sass**：当你部署项目时，已经编译好的 `.css` 文件会被打包进去，Sass 本身不会参与运行。
    
- **避免冗余依赖**：如果把 Sass 放在 `dependencies`，它也会被打包进生产环境，增加体积和复杂度，这是不必要的。

dependencies项目运行时必须的库|React、Redux、Ant Design 等
devDependencies仅开发阶段使用的工具Sass、TypeScript、Vite、ESLint 等

## mock

[vite-plugin-mock-dev-server/README.zh-CN.md at main · pengzhanbo/vite-plugin-mock-dev-server](https://github.com/pengzhanbo/vite-plugin-mock-dev-server/blob/main/README.zh-CN.md)

```sh
npm i -d vite-plugin-mock-dev-server
```

`-d` 是 `npm install --save-dev`
表示把安装的包作为 **开发依赖**（`devDependencies`）写入 `package.json`

mock配置
```json
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import {mockDevServerPlugin} from "vite-plugin-mock-dev-server";

// https://vite.dev/config/
export default defineConfig({
  plugins: [react(), mockDevServerPlugin()],
  server:{
    // 需在 proxy 中配置的代理前缀， mock-dev-server 才会拦截并进行 mock
        proxy: {
          '^/api': {
              target: '',
          },
      },
  }
});
```
更多配置可参考 https://github.com/pengzhanbo/vite-plugin-mock-dev-server/blob/main/example/vite.config.ts

```
proxy: {
  '^/api': { target: 'http://example.com' }
}
```

- `'^/api'` 是一个 **正则表达式字符串**，表示匹配所有以 `/api` 开头的请求路径。
    
- `target: 'http://example.com'` 表示这些请求会被代理到 `http://example.com`
    

举例：

- 请求 `/api/user` → 实际会转发到 `http://example.com/api/user`
    
- 请求 `/api/login` → 转发到 `http://example.com/api/login`


# echarts
```shell
npm i echarts-for-react
```

# rc-virtual-list 用于处理大量数据提升性能

```shell
npm i rc-virtual-list
```


# 富文本编辑器

```shell
npm install @wangeditor/editor --save
npm i @wangeditor/editor-for-react --save
```

# XSS过滤（富文本生成HTML）
step1 
```shell
npm install dompurify
```

```tsx
import DOMPurify from 'dompurify'
```

step2 修改onChange
```tsx
onChange={(editor) => {
  const rawHtml = editor.getHtml()
  const cleanHtml = DOMPurify.sanitize(rawHtml)
  setHtml(cleanHtml)
}}
```

关键代码
```tsx
import DOMPurify from 'dompurify'

// ...

<Editor
  defaultConfig={editorConfig}
  value={html}
  onCreated={setEditor}
  onChange={(editor) => {
    const rawHtml = editor.getHtml()
    const cleanHtml = DOMPurify.sanitize(rawHtml)
    setHtml(cleanHtml)
  }}
  mode="default"
  style={{ height: '500px', overflowY: 'hidden' }}
/>

// ...

<div style={{ marginTop: '15px' }} dangerouslySetInnerHTML={{ __html: html }} />

```

如果允许用户上传图片或粘贴外部内容，可以配置 DOMPurify 的白名单：

```tsx
DOMPurify.sanitize(rawHtml, {
  ALLOWED_TAGS: ['p', 'b', 'i', 'u', 'a', 'img', 'ul', 'li', 'strong', 'em'],
  ALLOWED_ATTR: ['href', 'src', 'alt', 'title']
})
```

# HTML → Markdown

```shell
npm install turndown
```

```tsx
import TurndownService from 'turndown';
```
报错 Could not find a declaration file for module 'turndown'，没有类型声明


### 解决：手动声明模块类型

添加一个声明文件：

1. 在项目根目录下创建一个 `types` 文件夹（如果没有）
    
2. 新建文件：`types/turndown.d.ts`

```ts
declare module 'turndown' {
  export default class TurndownService {
    constructor(options?: any);
    turndown(html: string): string;
    addRule(key: string, rule: any): void;
    remove(key: string): void;
  }
}
```

3. 然后在 `tsconfig.json` 中确保包含了这个类型文件：
```json
{
  "compilerOptions": {
    "typeRoots": ["./node_modules/@types", "./types"]
  }
}
```


# 配置修改
`moduleResolution: "bundler"` 不适用于 Node 环境（如 `vite.config.ts`）