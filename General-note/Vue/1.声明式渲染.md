---
title: 1.å£°æ˜å¼æ¸²æŸ“
---
# æ–‡æœ¬æ’å€¼
è¯­æ³•mustacheï¼ŒåŒå¤§æ‹¬å·
```vue
<script setup>
import { ref, reactive } from 'vue'

// ç»„ä»¶é€»è¾‘
// æ­¤å¤„å£°æ˜ä¸€äº›å“åº”å¼çŠ¶æ€
const title = ref("Title")
const counter = ref({
  count:0
})
const reactiveCounter = reactive({
  count:0
})
function handleClick(){
  counter.value.count++
  reactiveCounter.count++
}
</script>

<template>
  <h1>{{title}} </h1>
  <p>refçš„counter
    {{counter.count}}
  </p>
    <p>reactiveçš„counter
    {{reactiveCounter.count}}
  </p>
  <button @click = "handleClick">Click</button>
</template>
```

# å±æ€§ç»‘å®š
éœ€è¦ç”¨v-bind
ç”±äºÂ `v-bind`Â ä½¿ç”¨åœ°éå¸¸é¢‘ç¹ï¼Œå®ƒæœ‰ä¸€ä¸ªä¸“é—¨çš„ç®€å†™è¯­æ³•ï¼š
```vue
<div :id="dynamicId"></div>
```

```vue
<script setup>
import { ref } from 'vue'

const titleClass = ref('title')
</script>

<template>
  <h1 :class="titleClass">Make me red</h1>
</template>

<style>
.title {
  color: red;
}
</style>
```

# äº‹ä»¶ç›‘å¬
v-on
å› ä¸ºå…¶ç»å¸¸ä½¿ç”¨ï¼Œ`v-on`Â ä¹Ÿæœ‰ä¸€ä¸ªç®€å†™è¯­æ³•ï¼š

```vue
<button @click="increment">{{ count }}</button>
```

# è¡¨å•ç»‘å®š
æˆ‘ä»¬å¯ä»¥åŒæ—¶ä½¿ç”¨Â `v-bind`Â å’ŒÂ `v-on`Â æ¥åœ¨è¡¨å•çš„è¾“å…¥å…ƒç´ ä¸Šåˆ›å»ºåŒå‘ç»‘å®šï¼š

```vue
<input :value="text" @input="onInput">
```

ä¸ºäº†ç®€åŒ–åŒå‘ç»‘å®šï¼ŒVue æä¾›äº†ä¸€ä¸ªÂ `v-model`Â æŒ‡ä»¤ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸Šè¿°æ“ä½œçš„è¯­æ³•ç³–ï¼š

```vue
<input v-model="text">
```

```vue
<script setup>
import { ref } from 'vue'

const text = ref('')

</script>

<template>
  <input v-model="text" placeholder="Type here">
  <p>{{ text }}</p>
</template>
```

# æ¡ä»¶æ¸²æŸ“
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Â `v-if`Â æŒ‡ä»¤æ¥æœ‰æ¡ä»¶åœ°æ¸²æŸ“å…ƒç´ ï¼š


```vue
<h1 v-if="awesome">Vue is awesome!</h1>
```

è¿™ä¸ªÂ `<h1>`Â æ ‡ç­¾åªä¼šåœ¨Â `awesome`Â çš„å€¼ä¸ºçœŸå€¼æ—¶æ¸²æŸ“ã€‚è‹¥Â `awesome`Â æ›´æ”¹ä¸ºå‡å€¼ ï¼Œå®ƒå°†è¢«ä» DOM ä¸­ç§»é™¤ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨Â `v-else`Â å’ŒÂ `v-else-if`Â æ¥è¡¨ç¤ºå…¶ä»–çš„æ¡ä»¶åˆ†æ”¯ï¼š


```vue
<h1 v-if="awesome">Vue is awesome!</h1>
<h1 v-else>Oh no ğŸ˜¢</h1>
```

```vue
<script setup>
import { ref } from 'vue'

const awesome = ref(true)

function toggle() {
  awesome.value = !awesome.value
}
</script>

<template>
  <button @click="toggle">Toggle</button>
  <h1 v-if="awesome">Vue is awesome!</h1>
  <h1 v-else>Oh no ğŸ˜¢</h1>
</template>
```

# åˆ—è¡¨æ¸²æŸ“
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Â `v-for`Â æŒ‡ä»¤æ¥æ¸²æŸ“ä¸€ä¸ªåŸºäºæºæ•°ç»„çš„åˆ—è¡¨ï¼š

```vue
<ul>
  <li v-for="todo in todos" :key="todo.id">
    {{ todo.text }}
  </li>
</ul>
```

è¿™é‡Œçš„Â `todo`Â æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨è¿­ä»£çš„æ•°ç»„å…ƒç´ ã€‚å®ƒåªèƒ½åœ¨Â `v-for`Â æ‰€ç»‘å®šçš„å…ƒç´ ä¸Šæˆ–æ˜¯å…¶å†…éƒ¨è®¿é—®ï¼Œå°±åƒå‡½æ•°çš„ä½œç”¨åŸŸä¸€æ ·ã€‚

æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜ç»™æ¯ä¸ª todo å¯¹è±¡è®¾ç½®äº†å”¯ä¸€çš„Â `id`ï¼Œå¹¶ä¸”å°†å®ƒä½œä¸º[ç‰¹æ®Šçš„Â `key`Â attribute](https://cn.vuejs.org/api/built-in-special-attributes.html#key)Â ç»‘å®šåˆ°æ¯ä¸ªÂ `<li>`ã€‚`key`Â ä½¿å¾— Vue èƒ½å¤Ÿç²¾ç¡®åœ°ç§»åŠ¨æ¯ä¸ªÂ `<li>`ï¼Œä»¥åŒ¹é…å¯¹åº”çš„å¯¹è±¡åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚

æ›´æ–°åˆ—è¡¨æœ‰ä¸¤ç§æ–¹å¼ï¼š

1. åœ¨æºæ•°ç»„ä¸Šè°ƒç”¨[å˜æ›´æ–¹æ³•](https://stackoverflow.com/questions/9009879/which-javascript-array-functions-are-mutating)ï¼š
    
    ```js
    todos.value.push(newTodo)
    ```
    
2. ä½¿ç”¨æ–°çš„æ•°ç»„æ›¿ä»£åŸæ•°ç»„ï¼š
    
    
    ```js
    todos.value = todos.value.filter(/* ... */)
    ```

```vue
<script setup>
import { ref } from 'vue'

// ç»™æ¯ä¸ª todo å¯¹è±¡ä¸€ä¸ªå”¯ä¸€çš„ id
let id = 0

const newTodo = ref('')
const todos = ref([
  { id: id++, text: 'Learn HTML' },
  { id: id++, text: 'Learn JavaScript' },
  { id: id++, text: 'Learn Vue' }
])

function addTodo() {
  todos.value.push({id:id++, text:newTodo.value})
  newTodo.value = ''
}

function removeTodo(todo) {
  todos.value = todos.value.filter(e => e !== todo)
}
</script>

<template>
  <form @submit.prevent="addTodo">
    <input v-model="newTodo" required placeholder="new todo">
    <button>Add Todo</button>
  </form>
  <ul>
    <li v-for="todo in todos" :key="todo.id">
      {{ todo.text }}
      <button @click="removeTodo(todo)">X</button>
    </li>
  </ul>
</template>
```

# è®¡ç®—å±æ€§

è®©æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥çš„ todo åˆ—è¡¨åŸºç¡€ä¸Šç»§ç»­ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ç»™æ¯ä¸€ä¸ª todo æ·»åŠ äº†åˆ‡æ¢åŠŸèƒ½ã€‚è¿™æ˜¯é€šè¿‡ç»™æ¯ä¸€ä¸ª todo å¯¹è±¡æ·»åŠ Â `done`Â å±æ€§æ¥å®ç°çš„ï¼Œå¹¶ä¸”ä½¿ç”¨äº†Â `v-model`Â å°†å…¶ç»‘å®šåˆ°å¤é€‰æ¡†ä¸Šï¼š

template

```
<li v-for="todo in todos">
  <input type="checkbox" v-model="todo.done">
  ...
</li>
```

ä¸‹ä¸€ä¸ªå¯ä»¥æ·»åŠ çš„æ”¹è¿›æ˜¯éšè—å·²ç»å®Œæˆçš„ todoã€‚æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªèƒ½å¤Ÿåˆ‡æ¢Â `hideCompleted`Â çŠ¶æ€çš„æŒ‰é’®ã€‚ä½†æ˜¯åº”è¯¥å¦‚ä½•åŸºäºçŠ¶æ€æ¸²æŸ“ä¸åŒçš„åˆ—è¡¨é¡¹å‘¢ï¼Ÿ

ä»‹ç»ä¸€ä¸ªæ–° APIï¼š[`computed()`](https://cn.vuejs.org/guide/essentials/computed.html)ã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè®¡ç®—å±æ€§ refï¼Œè¿™ä¸ª ref ä¼šåŠ¨æ€åœ°æ ¹æ®å…¶ä»–å“åº”å¼æ•°æ®æºæ¥è®¡ç®—å…¶Â `.value`ï¼š

```vue
import { ref, computed } from 'vue'

const hideCompleted = ref(false)
const todos = ref([
  /* ... */
])

const filteredTodos = computed(() => {
  // æ ¹æ® `todos.value` & `hideCompleted.value`
  // è¿”å›è¿‡æ»¤åçš„ todo é¡¹ç›®
})
```

```diff
- <li v-for="todo in todos">
+ <li v-for="todo in filteredTodos">
```

# ç”Ÿå‘½å‘¨æœŸå’Œæ¨¡æ¿å¼•ç”¨
è¿™æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨**æ¨¡æ¿å¼•ç”¨**â€”â€”ä¹Ÿå°±æ˜¯æŒ‡å‘æ¨¡æ¿ä¸­ä¸€ä¸ª DOM å…ƒç´ çš„ refã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡[è¿™ä¸ªç‰¹æ®Šçš„Â `ref`Â attribute](https://cn.vuejs.org/api/built-in-special-attributes.html#ref)Â æ¥å®ç°æ¨¡æ¿å¼•ç”¨ï¼š

```vue
<p ref="pElementRef">hello</p>
```

è¦è®¿é—®è¯¥å¼•ç”¨ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ä¸€ä¸ªåŒåçš„ refï¼š

```js
const pElementRef = ref(null)
```

æ³¨æ„è¿™ä¸ª ref ä½¿ç”¨Â `null`Â å€¼æ¥åˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºå½“Â `<script setup>`Â æ‰§è¡Œæ—¶ï¼ŒDOM å…ƒç´ è¿˜ä¸å­˜åœ¨ã€‚æ¨¡æ¿å¼•ç”¨ ref åªèƒ½åœ¨ç»„ä»¶**æŒ‚è½½**åè®¿é—®ã€‚

è¦åœ¨æŒ‚è½½ä¹‹åæ‰§è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Â `onMounted()`Â å‡½æ•°ï¼š


```js
import { onMounted } from 'vue'

onMounted(() => {
  // æ­¤æ—¶ç»„ä»¶å·²ç»æŒ‚è½½ã€‚
})
```

è¿™è¢«ç§°ä¸º**ç”Ÿå‘½å‘¨æœŸé’©å­**â€”â€”å®ƒå…è®¸æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªåœ¨ç»„ä»¶çš„ç‰¹å®šç”Ÿå‘½å‘¨æœŸè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–çš„é’©å­å¦‚Â `onUpdated`Â å’ŒÂ `onUnmounted`ã€‚

```vue
<script setup>
import { ref, onMounted } from 'vue'

const pElementRef = ref(null)

onMounted(()=>{
  pElementRef.value.textContent = "Mounted"
})
</script>

<template>
  <p ref="pElementRef">Hello</p>
</template>
```

# ä¾¦å¬å™¨

æœ‰æ—¶æˆ‘ä»¬éœ€è¦å“åº”æ€§åœ°æ‰§è¡Œä¸€äº›â€œå‰¯ä½œç”¨â€â€”â€”ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªæ•°å­—æ”¹å˜æ—¶å°†å…¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¾¦å¬å™¨æ¥å®ç°å®ƒï¼š

```js
import { ref, watch } from 'vue'

const count = ref(0)

watch(count, (newCount) => {
  // æ²¡é”™ï¼Œconsole.log() æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨
  console.log(`new count is: ${newCount}`)
})
```

`watch()`Â å¯ä»¥ç›´æ¥ä¾¦å¬ä¸€ä¸ª refï¼Œå¹¶ä¸”åªè¦Â `count`Â çš„å€¼æ”¹å˜å°±ä¼šè§¦å‘å›è°ƒã€‚`watch()`Â ä¹Ÿå¯ä»¥ä¾¦å¬å…¶ä»–ç±»å‹çš„æ•°æ®æº

```vue
<script setup>
import { ref, watch } from 'vue'

const todoId = ref(1)
const todoData = ref(null)

async function fetchData() {
  todoData.value = null
  const res = await fetch(
    `https://jsonplaceholder.typicode.com/todos/${todoId.value}`
  )
  todoData.value = await res.json()
}

fetchData()
  
watch(todoId, (newId)=>{
  fetchData()
})
</script>

<template>
  <p>Todo id: {{ todoId }}</p>
  <button @click="todoId++" :disabled="!todoData">Fetch next todo</button>
  <p v-if="!todoData">Loading...</p>
  <pre v-else>{{ todoData }}</pre>
</template>
```

# Props

å­ç»„ä»¶å¯ä»¥é€šè¿‡Â **props**Â ä»çˆ¶ç»„ä»¶æ¥å—åŠ¨æ€æ•°æ®ã€‚é¦–å…ˆï¼Œéœ€è¦å£°æ˜å®ƒæ‰€æ¥å—çš„ propsï¼š

ChildComp.vue

```vue
<script setup>
const props = defineProps({
  msg: String
})
</script>
```

æ³¨æ„Â `defineProps()`Â æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å®ï¼Œå¹¶ä¸éœ€è¦å¯¼å…¥ã€‚ä¸€æ—¦å£°æ˜ï¼Œ`msg`Â prop å°±å¯ä»¥åœ¨å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚å®ƒä¹Ÿå¯ä»¥é€šè¿‡Â `defineProps()`Â æ‰€è¿”å›çš„å¯¹è±¡åœ¨ JavaScript ä¸­è®¿é—®ã€‚

çˆ¶ç»„ä»¶å¯ä»¥åƒå£°æ˜ HTML attributes ä¸€æ ·ä¼ é€’ propsã€‚è‹¥è¦ä¼ é€’åŠ¨æ€å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Â `v-bind`Â è¯­æ³•ï¼š


```vue
<ChildComp :msg="greeting" />
```

```vue
<script setup>
import { ref } from 'vue'
import ChildComp from './ChildComp.vue'

const greeting = ref('Hello from parent')
</script>

<template>
  <ChildComp :msg="greeting"/>
</template>
```

```vue
<script setup>
const props = defineProps({
  msg: String
})
</script>

<template>
  <h2>{{ msg || 'No props passed yet' }}</h2>
</template>
```

# Emits

é™¤äº†æ¥æ”¶ propsï¼Œå­ç»„ä»¶è¿˜å¯ä»¥å‘çˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶ï¼š

```vue
<script setup>
// å£°æ˜è§¦å‘çš„äº‹ä»¶
const emit = defineEmits(['response'])

// å¸¦å‚æ•°è§¦å‘
emit('response', 'hello from child')
</script>
```

`emit()`Â çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„åç§°ã€‚å…¶ä»–æ‰€æœ‰å‚æ•°éƒ½å°†ä¼ é€’ç»™äº‹ä»¶ç›‘å¬å™¨ã€‚

çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨Â `v-on`Â ç›‘å¬å­ç»„ä»¶è§¦å‘çš„äº‹ä»¶â€”â€”è¿™é‡Œçš„å¤„ç†å‡½æ•°æ¥æ”¶äº†å­ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶çš„é¢å¤–å‚æ•°å¹¶å°†å®ƒèµ‹å€¼ç»™äº†æœ¬åœ°çŠ¶æ€ï¼š


```vue
<ChildComp @response="(msg) => childMsg = msg" />
```

```vue
<script setup>
import { ref } from 'vue'
import ChildComp from './ChildComp.vue'

const childMsg = ref('No child msg yet')
</script>

<template>
  <ChildComp @response="(msg) => childMsg = msg"/>
  <p>{{ childMsg }}</p>
</template>
```

```vue
<script setup>
const emit = defineEmits(['response'])

emit('response', 'hello from child')
</script>

<template>
  <h2>Child component</h2>
</template>
```

# æ’æ§½

é™¤äº†é€šè¿‡ props ä¼ é€’æ•°æ®å¤–ï¼Œçˆ¶ç»„ä»¶è¿˜å¯ä»¥é€šè¿‡**æ’æ§½**Â (slots) å°†æ¨¡æ¿ç‰‡æ®µä¼ é€’ç»™å­ç»„ä»¶ï¼š


```vue
<ChildComp>
  This is some slot content!
</ChildComp>
```

åœ¨å­ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Â `<slot>`Â å…ƒç´ ä½œä¸ºæ’æ§½å‡ºå£ (slot outlet) æ¸²æŸ“çˆ¶ç»„ä»¶ä¸­çš„æ’æ§½å†…å®¹ (slot content)ï¼š

```vue
<!-- åœ¨å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ -->
<slot/>
```

`<slot>`Â æ’å£ä¸­çš„å†…å®¹å°†è¢«å½“ä½œâ€œé»˜è®¤â€å†…å®¹ï¼šå®ƒä¼šåœ¨çˆ¶ç»„ä»¶æ²¡æœ‰ä¼ é€’ä»»ä½•æ’æ§½å†…å®¹æ—¶æ˜¾ç¤ºï¼š

```vue
<slot>Fallback content</slot>
```

```vue
<script setup>
import { ref } from 'vue'
import ChildComp from './ChildComp.vue'

const msg = ref('from parent')
</script>

<template>
  <ChildComp>Message: {{ msg }}</ChildComp>
</template>
```

```vue
<template>
  <slot>Fallback content</slot>
</template>
```