---
title: react为什么需要合成事件
---
为了解决跨浏览器兼容问题，提供一种跨浏览器的事件处理机制。
它是在原生事件基础上构建的，提供了与原生事件相似的api和属性。

跨浏览器兼容
性能优化：使用了事件池，通过复用事件对象来减少内存分配和垃圾回收的开销从而提高性能。
合成嵌套：合成事件支持事件捕获和事件冒泡，在一个组件中注册多个事件处理函数，避免事件处理函数之间的影响。
支持事件委托：支持在父组件注册事件处理函数，处理子组件的事件。


### 什么 React 需要合成事件

#### 1. **跨浏览器兼容性**

- 不同浏览器对原生 DOM 事件的实现存在差异，比如 `event.which`、`event.target` 等属性在某些浏览器中表现不一致。
    
- React 的合成事件对这些属性进行了标准化处理，让开发者不再为兼容性头疼。
    

#### 2. **事件委托机制优化性能**

- React 并不会为每个 DOM 元素都绑定事件监听器，而是将所有事件统一委托到一个根节点（React 17 之前是 `document`，之后是 `root` 节点）。
    
- 这样可以显著减少事件监听器的数量，降低内存消耗，提高性能，尤其在大型应用中尤为明显。
    

#### 3. **统一事件管理与生命周期控制**

- 合成事件由 React 自己管理，能在组件卸载时自动清除事件监听器，避免内存泄漏。
    
- 事件对象来自事件池，处理完后会被回收复用，进一步优化性能。
    

#### 4. **支持 React 的更新机制**

- 在合成事件中触发 `setState`，React 会将更新操作加入队列，等事件处理完后再统一批量更新，避免多次渲染。
    
- 这与 React 的“批处理更新”策略紧密结合，提高了渲染效率。
    

#### 5. **更好的事件冒泡控制**

- 在 React 17 之前，调用 `e.stopPropagation()` 只能阻止合成事件的冒泡，原生事件仍然会冒泡到 `document`。
    
- React 17 改进了事件委托机制，使得事件冒泡可以被更精确地控制。
