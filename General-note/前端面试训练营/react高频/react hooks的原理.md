---
title: react hooks的原理
---
函数组件和闭包

设计hook的初衷是为了让函数组件有类组件相似的特性，比如state和生命周期函数，并可以更方便的实现代码复用。Fiber构架对组件的渲染进行了重构，将组件的状态和逻辑与渲染过程分离，使得组件的状态和逻辑可以在函数组件中进行处理。

其次还涉及到闭包。hooks通过闭包机制来实现对状态和逻辑的封装和管理，让组件的状态和逻辑可以被保存和复用。每一个hook对应一个闭包，其中保存了组件状态值和管理状态的函数，这些函数可以在组件的生命周期内被多次调用，从而实现对状态的更新和管理。

具体实现：
在函数中调用hook函数
创建闭包
在渲染过程中使用闭包中保存的状态和函数
更新状态后重新渲染组件