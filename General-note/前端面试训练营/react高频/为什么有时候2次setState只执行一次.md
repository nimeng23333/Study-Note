---
title: 为什么有时候2次setState只执行一次
---
因为可能会多次更新合并成一次更新 batching
在批量更新期间会尽可能的合并更新减少重复渲染次数。

具体来说setState进行状态更新的时候，会将更新放入更新队列中，并不会立刻触发组件的重新渲染。如果在同一个事件处理函数、生命周期方法或者useEffect回调函数中多次调用了setState，这些更新会被合并成一个更新，在下一次批量更新期间一起执行。