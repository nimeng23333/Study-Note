---
title: 模型加载
---
# gltf和glb格式

```js
const gltfLoader = new GLTFLoader()
gltfLoader.load(
	// resource URL
	'/assets/models/小区住房园区高楼住宅.glb',
	// called when the resource is loaded
	function ( gltf ) {
		scene.add( gltf.scene );
    console.log(gltf)
		gltf.animations; // Array<THREE.AnimationClip>
		gltf.scene; // THREE.Group
		gltf.scenes; // Array<THREE.Group>
		gltf.cameras; // Array<THREE.Camera>
		gltf.asset; // Object

	},
	// called while loading is progressing
	function ( xhr ) {

		console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

	},
	// called when loading has errors
	function ( error ) {

		console.log( 'An error happened' );

	}
);
```

# drc格式 DRACOLoader

一个用于加载经过Draco压缩的图形库。

Draco文件*不*包含材质，纹理，动画和节点结构-为了能使用这些特征，需要将Draco图形 嵌入到GLTF文件中。使用[glTF-Pipeline](https://github.com/AnalyticalGraphicsInc/gltf-pipeline)可以将一个普通的GLTF文件转化为经过Draco压缩的GLTF文件。 当使用Draco压缩的GLTF模型时，[GLTFLoader](https://threejs.org/docs/index.html#examples/zh/loaders/GLTFLoader "GLTFLoader")内部会调用DRACOLoader。

如果在gltf内部draco压缩，解压需要如下使用：
1.需要将draco文件夹复制到public文件夹里`\node_modules\three\examples\jsm\libs\draco`

2.代码如下
```js
import { DRACOLoader } from "three/examples/jsm/loaders/DRACOLoader"

// 如果模型由draco压缩，需要解压
const dracoLoader = new DRACOLoader();
// 设置解压路径
dracoLoader.setDecoderPath("/draco/")
// 解码器绑定到gltfloader上
gltfLoader.setDRACOLoader(dracoLoader)
```