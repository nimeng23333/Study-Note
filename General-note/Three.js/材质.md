---
title: 材质
---
# MeshBasicMaterial

# MeshStandardMaterial
一种基于物理的标准材质

```js
// 创建材质
let textureLoader = new THREE.TextureLoader();
let texture = textureLoader.load(
  "/assets/textures/manhole_cover/ManholeCover009_2K-PNG_Color.png"
);
texture.colorSpace = THREE.SRGBColorSpace //默认为linear，比实际情况可能更亮

// 加载ao贴图(环境遮挡)
let aoMap = textureLoader.load(
  "/assets/textures/manhole_cover/ManholeCover009_2K-PNG_AmbientOcclusion.png"
);
// 加载alpha贴图（透明度）
let alphaMap = textureLoader.load(
  "/assets/textures/manhole_cover/ManholeCover009_2K-PNG_Opacity.png"
);
// 加载高光贴图（在basic里是 specularMap ，standard是metalnessMap
let metalnessMap = textureLoader.load(
  "/assets/textures/manhole_cover/ManholeCover009_2K-PNG_Metalness.png"
);
// standard里是roughnessMap， basic没有
let roughnessMap = textureLoader.load(
  "/assets/textures/manhole_cover/ManholeCover009_2K-PNG_Roughness.png"
);
let displacementMap = textureLoader.load(
  "/assets/textures/manhole_cover/ManholeCover009_2K-PNG_Displacement.png"
);
let normalMap = textureLoader.load(
  "/assets/textures/manhole_cover/ManholeCover009_2K-PNG_NormalGL.png"
);

```

纹理默认不重复，如果是重复贴图，需要设置repeat
```js
// material
const textureLoader = new THREE.TextureLoader();

const redRockTexture = {
  basic: textureLoader.load("/assets/textures/redrock/Leather024_1K-PNG_Color.png"),
  roughness : textureLoader.load("/assets/textures/redrock/Leather024_1K-PNG_Roughness.png"),
  displacement : textureLoader.load("/assets/textures/redrock/Leather024_1K-PNG_Displacement.png"),
  normalMap : textureLoader.load("/assets/textures/redrock/Leather024_1K-PNG_NormalGL.png"),
};

// 设置每个纹理的 wrap 和 repeat(纹理默认只用一次，会显得很大)
Object.values(redRockTexture).forEach(texture => {
  texture.wrapS = THREE.RepeatWrapping;
  texture.wrapT = THREE.RepeatWrapping;
  texture.repeat.set(4, 4); // 在表面上重复4次，让纹理缩小
});
```

# 材质贴图 .map

# 高光贴图 .specularMap
白色 - 反射强度越高
黑色 - 反射强度越低

# 透明贴图 .alphaMap
类似高光贴图
（黑色：完全透明；白色：完全不透明）

# 背景、环境、环境贴图、环境光遮蔽

### 环境贴图 .envMap

纹理常量（Texture Constants）
EquirectangularReflectionMapping 和 EquirectangularRefractionMapping 用于等距圆柱投影的环境贴图，也被叫做经纬线映射贴图。等距圆柱投影贴图表示沿着其水平中线360°的视角，以及沿着其垂直轴向180°的视角。贴图顶部和底部的边缘分别对应于它所映射的球体的北极和南极。
```js
import { EXRLoader } from "three/examples/jsm/loaders/EXRLoader";

let exrLoader = new EXRLoader()
exrLoader.load("/assets/textures/environment/DayEnvironmentHDRI047_2K-HDR.exr" , (envMap) =>{
  // 设置球形贴图
  envMap.mapping = THREE.EquirectangularReflectionMapping
  // 设置环境贴图
  scene.background = envMap
})
```
EXR格式用EXRLoader，HDR用RGBELoader

### 环境光遮蔽 .aoMap : Texture
环境光减少的地方（比如垂直高度上有高差，那条缝隙能接受到的环境光会变少，更真实

该纹理的红色通道用作环境遮挡贴图。默认值为null。aoMap需要第二组UV。


# 光照贴图
类似于着色

# 透明材质的渲染问题

当你有多个透明物体时：

- 如果前面的玻璃材质设置了 `transparent: true` 且 `depthWrite: true`，它会写入深度缓冲，导致后面的有透明的物体比如：穿孔板被“遮挡”，即使玻璃是透明的。
    
- 穿孔板用了 `alphaMap`，但如果渲染顺序不对，它可能根本没被渲染出来。

需要关掉玻璃的depthWrite

一个经典的玻璃材质：
```js
  const material = new THREE.MeshPhysicalMaterial( {
    color: 0xffffff,
    metalness: 0,
    roughness: 0,
    ior: 1.5,
    envMapIntensity: 1,
    transmission: 1, // use material.transmission for glass materials
    specularIntensity: 1,
    specularColor: 0xffffff,
    opacity: 1,
    side: THREE.DoubleSide,
    transparent: true,
    depthWrite : false, //关掉深度写入，不然后面的透明物体看不到了
  } );
```

# shaderMaterial

[用Three.js搞个泛光轮廓和渐变围栏3D区块地图没点效果都不敢拿出去炫耀了！点击来就学如何用Three.js给3D区 - 掘金](https://juejin.cn/post/7343902899095306259)